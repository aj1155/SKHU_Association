-- 테이블 순서는 관계를 고려하여 한 번에 실행해도 에러가 발생하지 않게 정렬되었습니다.

-- location Table Create SQL
CREATE TABLE location
(
    `id`         BIGINT           NOT NULL    AUTO_INCREMENT, 
    `latitude`   double           NULL, 
    `longitude`  double           NULL, 
    `name`       varchar(500)     NULL, 
    `address`    varchar(1000)    NULL, 
    `createdAt`  DATETIME         NULL, 
    `createdBy`  varchar(50)      NULL, 
    `deleted`    TINYINT          NULL, 
    PRIMARY KEY (id)
);


-- user Table Create SQL
CREATE TABLE user
(
    `id`         BIGINT          NOT NULL    AUTO_INCREMENT, 
    `email`      VARCHAR(200)    NULL, 
    `createdAt`  DATETIME        NULL, 
    `createdBy`  VARCHAR(50)     NULL, 
    `deleted`    TINYINT         NULL, 
    PRIMARY KEY (id)
);


-- page Table Create SQL
CREATE TABLE page
(
    `id`          BIGINT         NOT NULL    AUTO_INCREMENT, 
    `locationId`  BIGINT         NULL, 
    `userId`      BIGINT         NULL, 
    `content`     test           NULL, 
    `createdAt`   DATETIME       NULL, 
    `createdBy`   VARCHAR(50)    NULL, 
    `modifiedAt`  DATETIME       NULL, 
    `modifiedBy`  VARCHAR(50)    NULL, 
    `deleted`     TINYINT        NULL, 
    PRIMARY KEY (id)
);

ALTER TABLE page ADD CONSTRAINT FK_page_locationId_location_id FOREIGN KEY (locationId)
 REFERENCES location (id)  ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE page ADD CONSTRAINT FK_page_userId_user_id FOREIGN KEY (userId)
 REFERENCES user (id)  ON DELETE RESTRICT ON UPDATE RESTRICT;


-- pageImage Table Create SQL
CREATE TABLE pageImage
(
    `id`          BIGINT           NOT NULL    AUTO_INCREMENT, 
    `pageId`      VARCHAR(45)      NULL, 
    `locationId`  VARCHAR(45)      NULL, 
    `objectkey`   varchar(1024)    NULL, 
    `url`         varchar(2000)    NULL, 
    `name`        varchar(1000)    NULL, 
    `createdAt`   DATETIME         NULL, 
    `createdBy`   VARCHAR(50)      NULL, 
    `modifiedAt`  DATETIME         NULL, 
    `modifiedBy`  VARCHAR(50)      NULL, 
    `deleted`     TINYINT          NULL, 
    PRIMARY KEY (id)
);

ALTER TABLE pageImage ADD CONSTRAINT FK_pageImage_pageId_page_id FOREIGN KEY (pageId)
 REFERENCES page (id)  ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE pageImage ADD CONSTRAINT FK_pageImage_locationId_location_id FOREIGN KEY (locationId)
 REFERENCES location (id)  ON DELETE RESTRICT ON UPDATE RESTRICT;


-- heart Table Create SQL
CREATE TABLE heart
(
    `id`         BIGINT                 NOT NULL    AUTO_INCREMENT, 
    `pagId`      BIGINT                 NULL, 
    `createdAt`  VARCHDATETIMEAR(45)    NULL, 
    `createdBy`  VARCHAR(50)            NULL, 
    `deleted`    TINYINT                NULL, 
    PRIMARY KEY (id)
);

ALTER TABLE heart ADD CONSTRAINT FK_heart_pagId_page_id FOREIGN KEY (pagId)
 REFERENCES page (id)  ON DELETE RESTRICT ON UPDATE RESTRICT;


